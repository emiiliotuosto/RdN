% !TEX root =  main.tex
%%% Macros for Klaimographies ;-)

\def\finex{{\unskip\nobreak\hfil
\penalty50\hskip1em\null\nobreak\hfil$\diamond$
\parfillskip=0pt\finalhyphendemerits=0\endgraf}}
\newcommand{\dummypar}[1]{\ifempty{#1}{\_}{#1}}
%\newcommand{\undef}{\textit{undef}}

\newcommand{\asort}[1][s]{\mathtt{#1}}
\newcommand{\wildcard}{\star}
\newcommandx{\atuple}[1][1 = t]{\texttt{#1}}
\newcommandx{\aloc}[1][1=l]{\texttt{\color{blue}#1}}
\newcommand{\locset}{\mathcal{L}\!\mathit{oc}}
\newcommand{\locsort}{\mathcal{L}\!\mathit{oc}}
\newcommand{\varset}{\mathcal{V}}
\newcommand{\tupleset}{\mathcal{T}}
\newcommand{\mkop}[1]{\textcolor{ForestGreen}{#1}}
\DeclareMathOperator{\at}{\mkop{\tiny @}}
\DeclareMathOperator{\outop}{\mkop{!}}
\DeclareMathOperator{\parop}{\mkop{\mid}}
\DeclareMathOperator{\chop}{\mkop{+}}
\DeclareMathOperator{\inop}{\mkop{?}}
\DeclareMathOperator{\toop}{\mkop{\to}}
\DeclareMathOperator{\seqop}{\mkop{\prec}}
\DeclareMathOperator{\lseqop}{\mkop{\fatsemi}}
\DeclareMathOperator{\prefop}{\mkop{.}}
\newcommand{\rec}{\mkop{\mu}\xspace}
\newcommand{\nil}{\mkop{\textbf{0}}}
\newcommandx{\artupleat}[3][1={}, 2=\atuple, 3=\alocvar, usedefault=@]{
  \ifempty{#1}{{#2} \at {#3}}{{#2} \at {#3}}
}
\newcommandx{\atupleat}[3][1={}, 2=\atuple, 3=\alocvar, usedefault=@]{
  \ifempty{#1}{{(#2)} \at {#3}}{{(#2)} \at {#3}}
}
\newcommand{\clashes}{\sharp}
\newcommand{\matches}{\bowtie}
\newcommand{\arole}{\rho}
\newcommand{\ptp}[1]{{\mathsf{\MakeLowercase{#1}}}}
\newcommand{\amulti}[1]{{\mathsf{\titlecap{#1}}}}
\newcommand{\roleset}{\mathcal{R}}
\newcommand{\participants}{\mathcal{U}}
\newcommand{\multiroles}{\mathcal{M}}
\newcommand{\unknownstarop}{{\mkop{\ast}}}
\newcommand{\unknownop}{{\mkop{\odot}}}
\newcommandx{\unknownstar}[1][1=P]{{\amulti {#1}}^{\unknownstarop}}
\newcommandx{\unknown}[1][1= P]{{\amulti {#1}}^{\unknownop}}
\newcommand{\aK}[1][K]{\texttt{\textcolor{BrickRed}#1}}
\newcommand{\aL}[1][L]{\texttt{\textcolor{orange}#1}}
\newcommandx{\proj}[3][1=\aK,2=\arole,3=\eta,usedefault=@]{
  \dummypar{#1} \downharpoonleft_{\dummypar{#2}}^{\dummypar{#3}}
}
\newcommandx{\aint}[3][1=\arole, 2=\arole', 3=\aK, usedefault=@]{
  {#1} \toop {#2} \, \mkop{:} \, {#3}
}
\newcommandx{\apref}[5][1={},2={},3=\atuple,4=\alocvar,5={},usedefault=@]{
  \ifempty{#1}{
    \ifempty{#2}{\pi}{
      \ifempty{#5}{\ain[{#2}][{#3}][{#4}]}{\ard[{#2}][{#3}][{#4}]}
    }
  }{
    \ifempty{#2}{
      \ifempty{#5}{\aout[{#1}][({#3})][{#4}]}{\aout[{#1}][{#3}][{#4}]}
    }{
      {#1} \toop {#2} \, \mkop{:} \, \ifempty{#5}{({#3})\at{#4}}{{#3}\at{#4}}
    }
  }
}
\newcommandx{\alabel}[6][1=i,2={},3={},4=\atuple,5=\alocvar,6={},usedefault=@]{
  \ifempty{#1}{}{^{[#1]}}\apref[#2][#3][#4][#5][#6]
}
\newcommandx{\asum}[5][1=i,2=I,3=\arole,4=\arole,5=\aK,usedefault=@]{
  \displaystyle{\sum_{#1 \ifempty{#2}{}{\in #2}}}{
    \ifempty{#4}{\apref_{#1}}{
      \apref[#3][{#4_{#1}}][\atuple_{#1}][\alocvar_{#1}]
    }
    \ifempty{#5}{}{\mkop{.} #5_{#1}}
  }
}
\newcommandx{\gtrace}[3][1=1,2=n,3=\dummypar{},usedefault=@]{
  \alabel[{#3}]_{#1} \cdots \alabel[{#3}]_{#2}
}
\newcommandx{\ltrace}[2][1=1,2=n,usedefault=@]{
  \alpha_{#1} \cdots \alpha_{#2}
}

\newcommandx{\arout}[3][1=\arole,2=\atuple,3=\alocvar,usedefault=@]{
  \ifempty{#1}{#2 \outop #3}{{#1} \outop {#2} \at {#3}}
}
\newcommandx{\aout}[3][1=\arole,2=\atuple,3=\alocvar,usedefault=@]{
  \ifempty{#1}{(#2) \outop #3}{{#1} \outop {#2} \at {#3}}
}
\newcommandx{\ain}[3][1=\arole,2=\atuple,3=\alocvar,usedefault=@]{
  \ifempty{#1}{(#2) \inop #3}{{#1} \inop {(#2)} \at {#3}}
}
\newcommandx{\ard}[3][1=\arole,2=\atuple,3=\alocvar,,usedefault=@]{
  \ifempty{#1}{#2 \inop #3}{{#1} \inop {#2} \at {#3}}
}
\newcommandx{\grec}[4][1=\arole, 2=X, 3=\aK, 4={}, usedefault=@]{
  \rec^{#4}_{#1}\ #2 \mkop{.} #3
}
\newcommandx{\arec}[6][1=X,2=\aK,3={\arole},4={\aphi},5={\seq\alocvar}, 6={\seq x},usedefault=@]{
  {\big(\rec_{#3}^{#4}\ #1({#6}) \mkop{.} #2}\big)\langle#5\rangle
}
\newcommand{\aphi}{\phi}

\newcommandx{\aLpref}{\kappa}
\newcommandx{\aLsum}[4][1=i,2=I,3 = \aLpref,4=\aL,usedefault=@]{
    \displaystyle{\sum_{#1 \ifempty{#2}{}{\in #2}}}{{#3_{#1}.#4_{#1}}}
}

\newcommand{\selectors}[1]{\it{sel}(#1)}
\newcommand{\eqR}{\sim}

\newcommand{\irule}[2]{\frac{\textstyle\rule[-1.3ex]{0cm}{3ex}#1}{\textstyle\rule[-.5ex]{0cm}{3ex}#2}}

\newcommand{\rulename}[1]{\mathsf{[#1]}}

\def \mathaxiom #1#2{
  \begin{array}{l}%
    \ifempty{#2}{}{\hspace{0em}\mbox{\footnotesize$\mathsf{[#2]}$}\\}
    {#1}
  \end{array}
}

\def \mathrule #1#2#3{
  \begin{array}{l}%
    \ifempty{#3}{}{\hspace{0em}\mbox{\footnotesize$\mathsf{[#3]}$}\\}
    \irule{#1}{#2}
  \end{array}
}

\newcommand{\envmv}{\textcolor{cyan}{\Delta}}
\newcommand{\envtuple}{\textcolor{cyan}{\Gamma}}

\newcommandx{\red}[1][1={}]{\xlongrightarrow{#1}}

\newcommand{\roles}[1]{\mathsf{roles}\ifempty{#1}{}{(#1)}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                        START POMSETS MACROS                           %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\apom}{r}
\newcommand{\emptypom}{\epsilon}
\newcommand{\alf}{\lambda}
\newcommand{\projpom}[2]{{#1}\!\!\downharpoonright_{#2}}

%%% chosem macros to add to ggmacros
\newcommand{\eset}{\mathcal{E}}
\newcommand{\aR}[1][R]{{\colorR{#1}}}
\newcommand{\efst}[1]{\pi_1\ifempty{#1}{}{({#1})}}
\newcommand{\aConf}{s}
\newcommand{\alfof}[1]{\alf_{#1}}
\newcommand{\minev}[1]{\mathtt{min}_{[#1]}}
\newcommand{\esetof}[1]{\eset_{#1}}
\newcommand{\leqof}[1]{\leq_{#1}}
\newcommandx{\detM}[1][1=\aCM,usedefault=@]{\Delta({#1})}

\tikzset{
  pomset/.style={
    scale = .7,
    transform shape,
    smooth
  }
}
%
\newcommandx{\pomsetrep}[4][2=\alf, 3={}, 4={}, usedefault=@]{
  \left[
    \begin{array}[c]{c}
      \begin{tikzpicture}[every node/.style={pomset},#4]
        {#1;}
      \end{tikzpicture}
    \end{array}\right]_{#2}^{#3}
}
\DeclareMathOperator{\pomsetcup}{\sqcup}
\newcommand{\pomsetsingle}[1][\apref]{\pomsetrep{\node {$#1$}}[]}

\def\colorMsg{\color{BrickRed}}    
\def\colorR{\color{OliveGreen}}
\newcommand{\msg}[1][m]{\mathsf{\colorMsg{#1}}}
\newcommand{\lset}{\mathcal{L}}
\def\colorE{\color{orange}}
\newcommand{\al}[1][l]{{\colorE{#1}}}
\def\colorE{\color{orange}}
\newcommand{\aE}[1][E]{{\colorE{#1}}}
\renewcommand{\ae}[1][e]{{\colorE{#1}}}
\newcommandx{\rseq}[2][1=\apom,2={\aapom'},usedefault=@]{
  \gfun{seq}(\ifempty{#1}{\_}{#1},\ifempty{#2}{\_}{#2})
}
\def\colorFun{\color{black}}
\newcommand{\gfun}[1]{\ensuremath{\mathsf{\colorFun #1}}}
\newcommandx{\bp}[2][1={i},2=\apref,usedefault=@]{\gfun{bp}(\ifempty{#1}{\_}{#1}, \ifempty{#2}{\_}{#2})}
\newcommandx{\unique}[1][1=\apref,usedefault=@]{\gfun{unique}(\ifempty{#1}{\_}{#1})}
\newcommand{\ksem}[1]{\llbracket \ifempty{#1}{\_}{#1} \rrbracket}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% 			LOCAL TYPES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\dn}[1]{{\it dn}(#1)}
\newcommand{\fn}[1]{{\it fn}(#1)}
\newcommand{\names}[1]{{\it n}(#1)}
\newcommand{\sust}[2]{\{^{#2} / _{#1}\}}
%\newcommand{\generates}{\rightsquigarrow}
\newcommand{\generates}{=}
\newcommand{\alocvar}{{\color{red}\ell}}
\newcommand{\supp}[1]{\llcorner#1\lrcorner}
\newcommand{\consistent}[1]{#1\downarrow}

\newcommand{\eraseB}[1]{\downarrow\!{#1}}
\newcommandx{\ws}[2][1={\aK},2={\aK'},usedefault=@]{ws(\ifempty{#1}{\_}{#1}, \ifempty{#2}{\_}{#2})}
\newcommandx{\wb}[1][1={},usedefault=@]{wb(\ifempty{#1}{\_}{#1})}
\newcommand{\unfold}[5]{\text{unfold}_{#1}(\dummypar{#2}, \dummypar{#3}, \dummypar{#4}, \dummypar{#5})}

\newcommand{\seq}[1]{\widetilde{#1}}

\newcommandx{\alvar}[2][1=X,2={\seq\alocvar},usedefault=@]{#1\langle#2\rangle}
\newcommandx{\alrec}[5][1=X,2=\seq x,3=\aL,4=\seq\alocvar,5=,usedefault=@]{
{\big(\rec_{#5}#1({#2}) \prefop #3}\big)\langle#4\rangle}

\newcommandx{\abasiclrec}[3][1=X,2=\seq x,3=\aL,usedefault=@]{
{\big(\rec #1({#2}) \prefop #3}\big)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%%%                        END POMSETS MACROS                             %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
